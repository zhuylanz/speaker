<!DOCTYPE html>
<html>
<head>
	<title>Nuhula Speaker</title>
	<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
</head>
<body>
	<textarea style="width: 500px; height: 300px; overflow: auto; margin: auto;"></textarea>
	<input type="button" class="trigger" value="Speak" onclick="speakText()">
	<audio controls><source id="source" src="" type="audio/mpeg"/>
		Your browser does not support the audio element.
	</audio>
	<script>
		let speakText = function() {
			let text = $('textarea').val();
			$.ajax({
				url: '/speak',
				data: { text: text },
				success: function(data) {
					$('audio #source').attr('src', data+'?dynamic='+Math.random());
					setTimeout(() => {
						$('audio').get(0).load();
						$('audio').get(0).play();
					}, 500);
				}
			});
		}
	</script>
</body>
</html>
